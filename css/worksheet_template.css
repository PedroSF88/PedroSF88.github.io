/* Reading section text font size */
.reading-section p, .reading-text, .reading-section, .reading-section * {
  font-size: 12px !important;
}
/* Ensure the entire vocab card (not just the grid) prints on a single page */
.card:has(.vocab-grid) {
  page-break-inside: avoid !important;
  break-inside: avoid !important;
}
/* Ensure instructions row in image analysis table spans both columns visually */
.image-analysis-table td[colspan="2"] {
  width: 100% !important;
  display: table-cell;
}
.vocab-grid-cell [data-col="term"] {
  outline: 3px solid #2d2d2d;
  outline-offset: 0px;
  background: #f8fafc;
  border-radius: 5px;
}
.filled.term {
  font-weight: 700;
}
.sc-hidden {
  color: transparent !important;
  user-select: none;
}
.success-criteria-cell .sc-text {
  font-family: inherit;
  font-size: 16px;
  color: var(--ink);
  font-weight: 400;
  line-height: 1.4;
}
.blank.term {
  font-size: 11px;
  color: #b6c2cf;
  font-weight: 400;
  text-align: left;
  display: block;
}
.blank.muted {
  font-size: 11px;
  color: #b6c2cf;
  font-weight: 400;
  text-align: left;
  display: block;
}
.blank.placeholder {
  font-size: 11px;
  color: #b6c2cf;
  font-weight: 400;
  text-align: left;
  display: block;
}
.blank.placeholder {
  font-size: 11px;
  color: #b6c2cf;
  font-weight: 400;
}
.blank.muted {
  font-size: 11px;
  color: #b6c2cf;
  font-weight: 400;
}
/* Vocab grid layout overrides for flex proportions and alignment */
.vocab-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 3px;
  margin: 0 auto 0 auto;
  max-width: 100vw;
  width: 100%;
}
.vocab-grid-cell {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-height: 0;
  height: 2.5in;
/* Odd one out images scale to fit their cell */
.odd-one-out-img, .vocab-grid-cell .odd-one-out-img img {
  width: 100% !important;
  height: 100% !important;
  object-fit: contain !important;
  max-width: 100% !important;
  max-height: 100% !important;
  display: block;
  margin: 0 auto;
}
  background: #fff;
  border: 3px solid #2e2e2e;
  border-radius: 6px;
  padding: 2px 4px;
  gap: 0;
  flex: 1 1 0;
  box-sizing: border-box;
}
.vocab-grid-cell .slot-term {
  flex: 0 0 10%;
  align-items: center;
  justify-content: center;
  display: flex;
  min-height: 0;
  margin-bottom: 0;
  padding: 0;
}
.vocab-grid-cell .slot-def {
  flex: 0 0 40%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 0;
  width: 100%;
  padding: 0;
}
.vocab-grid-cell .slot-img {
  flex: 0 0 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  padding: 0;
}
.vocab-grid-cell .img-box {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Center all images in their parent containers */
img {
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top: auto;
  margin-bottom: auto;
  max-width: 100%;
  height: auto;
}
.vocab-grid-cell .img-preview {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
}
/* Make image analysis answer cell span full height */
.image-analysis-table td {
  height: 100%;
  vertical-align: top;
}
.image-analysis-table .lines.md {
  min-height: 120px;
  display: flex;
  flex-direction: column;
  justify-content: stretch;
  height: 100%;
}
.pill select {
  white-space: normal;
  max-width: 180px;
  min-width: 80px;
  overflow-wrap: anywhere;
}
/* Vocab image size limit */
.vocab-img-cell img,
.vocab-detail-row img {
  max-width: 100%;
  max-height: 50%;
  display: block;
  margin: 0 auto;
}

/* General image size limit for non-vocab images */
.img-box img,
img:not(.vocab-img-cell img):not(.vocab-detail-row img) {
  max-width: 3in;
  max-height: 3in;
}
/* Worksheet Template Styles (migrated from worksheet_template.html) */
:root{
  --accent:#0ea5e9; --ink:#0f172a; --muted:#64748b; --line:#e2e8f0; --bg:#ffffff; --soft:#f8fafc;
  --danger:#ef4444; --ok:#16a34a; --warn:#f59e0b;
}
html,body{height:100%}
body{margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; color:var(--ink); background:var(--bg);}    
.container{max-width:1120px; margin:0 auto; padding:24px;}

/* Controls */
.controls{position:sticky; top:0; background:var(--bg); z-index:20; padding:12px 24px; margin:0 -24px 16px; border-bottom:1px solid var(--line); display:flex; gap:12px; flex-wrap:wrap; align-items:center;}
.controls h2{font-size:18px; margin:0 12px 0 0; white-space:nowrap}
.pill{
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid var(--line);
  border-radius: 999px;
  background: #fff;
  flex-wrap: wrap;
}
.btn{cursor:pointer; border:1px solid var(--line); background:#fff; padding:8px 12px; border-radius:10px; font-weight:600;}
.btn:hover{border-color:var(--accent); box-shadow:0 1px 0 var(--accent) inset;}
.btn.primary{background:var(--accent); color:#fff; border-color:var(--accent);}    
.btn.ghost{background:transparent;}
.split{flex:1 1 auto}
.small{font-size:12px; color:var(--muted)}
input[type="url"], input[type="text"]{padding:8px 10px; border:1px solid var(--line); border-radius:10px; min-width:260px;}

/* Cards / sections */
.card{
  border:1px solid var(--line);
  border-radius:12px;
  padding:8px 10px 8px 10px;
  margin-bottom:8px;
  background:#fff;
  box-shadow:0 1px 2px #e2e8f0;
}
.card h3{
  margin:0 0 4px;
  font-size:17px;
  display:block;
  width:100%;
}

.card .small.muted {
  display:block;
  width:100%;
  text-align:left;
  margin-bottom:4px;
}
.section-header{
  font-family: inherit;
  font-weight: 700;
  font-size: 18px;
  color: #1e293b;
  text-align: center;
  background: #f3f4f6;
  border-radius: 8px;
  padding: 8px 0 8px 0;
  margin-bottom: 0.5em;
  letter-spacing: 0.01em;
}
.muted{
  color: var(--muted);
  text-align: left;
  display: block;
}
.subtle{color:#0b1220; font-weight:600}

/* Vocab table — compact rows */
table{width:100%; border-collapse:collapse; table-layout:fixed;}
th, td{border:1px solid var(--line); padding:1px 2px; vertical-align:top;}
th{background:var(--soft); font-size:12px; text-align:left;}
td{font-size:12px;}
/* New column widths: compact term, two uniform fill columns */
.col-term{width:7%;}
.col-definition{width:46.5%;}
.col-image{width:46.5%;}
.term, .definition{line-height:1.22}
.definition{
  font-size:15px;
  color:#334155;
  width:100%;
  text-align:center;
  word-break:break-word;
}
.img-box{
  display: flex;
  flex-direction: column;
  gap: 2px;
  height: 100%;
  justify-content: flex-end;
}
.img-preview{
  width:100%;
  height:auto;
  min-height:50px;
  background:#fafafa;
  border:1px dashed var(--line);
  border-radius:8px;
  object-fit:contain;
  max-height:50%;
  max-width:100%;
}
.placeholder{
  min-height:14px;
  border-radius:0;
  background:none;
  border:0;
  padding:0;
  color:#4c4e51;
  text-align:center;
  display:flex;
  align-items:center;
  justify-content:center;
  width:100%;
  height:100%;
}

/* Vertical term (90°) to save space, slightly larger font */
.cell-term{
  padding:0;
  height:100%;
  vertical-align:top;
}
.term-rot{
  writing-mode: vertical-rl;
  text-orientation: mixed;
  transform: rotate(180deg);
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  height: 100%;
  min-height: 78px;
  padding: 4px;
  flex-direction: column;
}
.term-rot .term{
  font-weight:700;
  font-size:15px;
  align-self: flex-start;
  flex: 0 0 15%;
  margin-bottom: 2px;
}
.no-writing-mode .term-rot{writing-mode: horizontal-tb; transform: rotate(-90deg); transform-origin: center; white-space:nowrap;}
.term-rot .placeholder{background:transparent; border:0; color:#94a3b8; padding:0;}

/* Version logic: keep all three columns visible, blank per-row via mask classes */
.cell .filled{display:block}
.cell .blank{display:none}

/* Per-row mask classes: add .maskA/.maskB/.maskC to the specific TD to hide in that version */
body.ver-A td.maskA .filled{display:none}
body.ver-A td.maskA .blank{display:block}

body.ver-B td.maskB .filled{display:none}
body.ver-B td.maskB .blank{display:block}

body.ver-C td.maskC .filled{display:none}
body.ver-C td.maskC .blank{display:block}

/* Lined writing areas for answers / SC inputs */
.lines{position:relative; border:1px solid var(--line); border-radius:10px; background:repeating-linear-gradient(to bottom, transparent 0 20px, #e2e8f0 20px 21px);}
.lines.sm{height:50px}
.lines.md{height:110px}
.lines.lg{height:160px}
.lines.xl{height:320px}
.lines .pad{padding:8px 10px; color:#94a3b8; font-size:12px}

/* Print */
@media print {
  .controls { display: none !important; }
  .container { padding: 0 0 8px; }
  /* Prevent all breaks between sections and within cards */
  .card, .card:not(:first-child), .card *, .section-header, .card .card {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    page-break-before: auto !important;
    break-before: auto !important;
    page-break-after: auto !important;
    break-after: auto !important;
  }
  /* Vocab grid: always start on a new page and fit on one page */
  .vocab-grid {
    page-break-before: avoid !important;
    break-before: avoid !important;
    page-break-after: auto !important;
    break-after: auto !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }
  .vocab-grid-cell {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    page-break-after: auto !important;
    break-after: auto !important;
  }
  html, body {
    height: auto !important;
    max-height: none !important;
    width: 100vw;
    max-width: 100vw;
    overflow: visible !important;
  }
  /* Print at 100% scale */
  body {
    zoom: 1 !important;
  }
  @page {
    size: auto;
    margin: 0.5cm;
  }
}

/* Test output */
#testResults{padding:6px 10px; border-radius:8px; border:1px dashed var(--line); font-size:13px; white-space:pre-wrap}
#testResults.ok{border-color:var(--ok)}
#testResults.warn{border-color:var(--warn)}
#testResults.err{border-color:var(--danger)}
